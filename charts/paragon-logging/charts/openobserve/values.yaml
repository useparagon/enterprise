# Default values for OpenObserve.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

image:
  repository: public.ecr.aws/zinclabs/openobserve
  pullPolicy: IfNotPresent
  tag: v0.15.1
  # tag: v0.15.1-debug

service:
  type: ClusterIP
  port: 5080

resources:
  limits:
    cpu: 1
    memory: 3Gi
  requests:
    cpu: 0.5
    memory: 3Gi

nameOverride: ''
fullnameOverride: 'openobserve'

# used to store GCP JSON creds as ConfigMap
credsJson: ""

ingress:
  enabled: false
  # certificate: 'arn:aws:acm:<region>:<account>:certificate/<uuid>'
  # className: ''
  # host: openobserve.<domain>.paragon.so
  # healthcheck_path: /healthz
  # include_annotations: true
  # load_balancer_name: paragon-<organization>

secretName: "paragon-secrets"

# see https://openobserve.ai/docs/storage/

secretKeys:
  - ZO_ROOT_USER_EMAIL
  - ZO_ROOT_USER_PASSWORD
  - ZO_S3_ACCESS_KEY
  - ZO_S3_SECRET_KEY

envKeys:
  - HOST_ENV
  - ZO_COMPACT_DATA_RETENTION_DAYS
  - ZO_DATA_DIR
  - ZO_LOCAL_MODE_STORAGE
  - ZO_S3_BUCKET_NAME
  - ZO_S3_FEATURE_HTTP1_ONLY
  - ZO_S3_PROVIDER
  - ZO_S3_REGION_NAME
  - ZO_S3_SERVER_URL
  - ZO_MEMORY_CACHE_ENABLED
  - ZO_MEMORY_CACHE_MAX_SIZE
  - ZO_MEMORY_CACHE_DATAFUSION_MAX_SIZE
  - ZO_MAX_FILE_SIZE_IN_MEMORY
  - ZO_FILE_MOVE_THREAD_NUM
  - ZO_COMPACT_FAST_MODE
  - ZO_COMPACT_MAX_FILE_SIZE
  - RUST_LOG
  - ZO_PROMETHEUS_ENABLE
  - ZO_METRICS_PORT
  - ZO_QUERY_TIMEOUT

env:
  ZO_COMPACT_DATA_RETENTION_DAYS: 365
  ZO_DATA_DIR: /data
  ZO_LOCAL_MODE_STORAGE: s3
  ZO_TELEMETRY: false
  ZO_MEMORY_CACHE_ENABLED: true
  ZO_MEMORY_CACHE_MAX_SIZE: 512
  ZO_MEMORY_CACHE_DATAFUSION_MAX_SIZE: 256
  ZO_MAX_FILE_SIZE_IN_MEMORY: 64
  ZO_FILE_MOVE_THREAD_NUM: 1
  ZO_COMPACT_FAST_MODE: false
  ZO_COMPACT_MAX_FILE_SIZE: 128
  RUST_LOG: error
  ZO_PROMETHEUS_ENABLE: true
  ZO_METRICS_PORT: 1800
  ZO_QUERY_TIMEOUT: 300

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/scheme: "http"
  prometheus.io/path: "/metrics"
  prometheus.io/port: "1800"

# Persistent Volume Claim configuration for /data directory
persistence:
  size: 5Gi

secrets: {}
