# Default values for redis-stream-exporter
# This is a YAML-formatted file.

# Image configuration
image:
  repository: useparagon/redis-streams-exporter
  tag: "latest"
  pullPolicy: IfNotPresent

# Image pull secrets
imagePullSecrets:
  - name: docker-cfg

# Name override
nameOverride: ''
fullnameOverride: 'redis-stream-exporter'

# Service account configuration
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext: {}

# Container security context
securityContext: {}

# Service configuration
service:
  type: ClusterIP
  port: 9124
  targetPort: 9124
  annotations: {}

# Ingress configuration
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

# Resources configuration
resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Redis connection configuration - these will be used to connect to different Redis instances
redis:
  cache:
    secretName: paragon-secrets
    secretKey: CACHE_REDIS_URL
  queue:
    secretName: paragon-secrets
    secretKey: QUEUE_REDIS_URL
  system:
    secretName: paragon-secrets
    secretKey: SYSTEM_REDIS_URL
  workflow:
    secretName: paragon-secrets
    secretKey: WORKFLOW_REDIS_URL

# Prometheus monitoring configuration
prometheus:
  enabled: true
  port: 1801
  path: /metrics
  interval: 15s
  scrapeTimeout: 10s

# Autoscaling configuration
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# Pod disruption budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  maxUnavailable: 1

# Network policy
networkPolicy:
  enabled: false
  ingressRules: []
  egressRules: []

# Secrets configuration (for backward compatibility)
secrets: {}
secretName: paragon-secrets

envKeys:
 - MONITOR_REDIS_STREAM_EXPORTER_PORT
 - REDIS_CLUSTER_ENABLED
 - REDIS_TLS_ENABLED

secretKeys:
 - QUEUE_REDIS_URL
 - CACHE_REDIS_URL
 - WORKFLOW_REDIS_URL
 - SYSTEM_REDIS_URL

# Replica count (used when autoscaling is disabled)
replicaCount: 1
